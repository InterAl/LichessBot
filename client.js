oldOne = lichess.socket.settings.receive; lichess.socket.settings.receive = function () { var args = Array.prototype.slice.call(arguments); if (args[0] == "move") { var obj = {move: args[1]}; console.log("posting", obj); $.ajax({"url": "http://localhost:1334", "contentType": "application/json", "dataType": "json", "type": "POST", "data": JSON.stringify(obj), "success": function (r) { if (r.from && r.to) { console.log("sending", r); lichess.socket.send("move", r, {ackable: false}) } } }); } oldOne.apply(this, arguments); }
